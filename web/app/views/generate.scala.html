@(pageTitle: String)

<!DOCTYPE html>

<html>
<head>
<title>@pageTitle</title>
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/s3index.css")">
<link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.ico")">
</head>
<body>

<div class="container">
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span
          class="icon-bar"></span>
        </a> <a class="brand" href="#">S3 Index Generation</a>
      </div>
    </div>
  </div>

<div class="row">
<div class="span9">
  <div class="wizard">
      <a href="@routes.Application.properties" id="wizardPropertiesLink" ><span class="badge">1</span> Specify Your Bucket</a>
      <a href="@routes.Application.viewProperties" id="wizardViewPropertiesLink" ><span class="badge">2</span> Set View Properties</a> 
      <a href="#" class="current" ><span class="badge badge-inverse">3</span> Generate Index</a>
  </div>
  </div>
  </div>

		<div class="row">
			<div class="span12"><br/></div>
		</div>

		<div class="row">
			<div class="span12">
				<div class="progress progress-striped">
					<div id="progressBar" class="bar" style="width: 0%;"></div>
				</div>
				<div class="row">
					<div class="span12">
						<div id="messageAlert" class="alert alert-info">
						  <i id="messageIcon" class="icon-info-sign"></i>
						  <span id="message">asdasd</span>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--/row-->

  <hr>

  <footer>
    <p>&copy; Codeminders 2012</p>
  </footer>

</div>
  <script src="@routes.Assets.at("javascripts/jquery-1.8.2.min.js")" type="text/javascript"></script>
  <script src="@routes.Assets.at("javascripts/s3index.js")" type="text/javascript"></script>
  <script src="@routes.Assets.at("javascripts/spin.min.js")" type="text/javascript"></script> 
  <script type="text/javascript">
    
			$(document).ready(
					function worker() {
						$.ajax({
							url : '@routes.Application.generatorStatus',
							success : function(response, textStatus, jqXHR) {
								console.log("Resp: " + response + ", json="
										+ jqXHR.responseText + ", status="
										+ textStatus);
								processGeneratorStatusResponse(jQuery.parseJSON(jqXHR.responseText))
							},
							complete : function() {
								setTimeout(worker, 5000);
							}
						});
					});
			
			function processGeneratorStatusResponse(status){
				if(status.status == 0){
					$('#messageIcon').attr("class", 'icon-info-sign')
					$('#messageAlert').attr("class", 'alert alert-info')
				} else if(status.status == 1){
					$('#messageIcon').attr("class", 'icon-thumbs-up')
					$('#messageAlert').attr("class", 'alert alert-success')
				} else if(status.status == 2){
					$('#messageIcon').attr("class", 'icon-thumbs-down')
					$('#messageAlert').attr("class", 'alert alert-error')
				}
				$('#progressBar').attr('style', 'width: ' + status.percents + '%;')
				$('#message').replaceWith('<span id="message">' + status.message + '</span>');
			}
		</script>
</body>
</html>
